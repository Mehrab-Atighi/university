"0","# Load the dataset"
"0","# Assuming your dataset is a data frame with columns 'date' and 'loss'"
"0","# Example of loading a dataset:"
"0","library(fitdistrplus)"
"0","data(""danishuni"")"
"0",""
"0","# Extract the 'loss' column"
"0","loss_data <- danishuni$Loss"
"0",""
"0","# Sort the loss data"
"0","n <- length(loss_data)"
"0","sorted_data <- sort(loss_data)"
"0",""
"0","# Function to calculate the mean excess for a given k"
"0","mean_excess <- function(data, k) {"
"0","  threshold <- data[k]"
"0","  excesses <- data[(k+1):n] - threshold"
"0","  return(mean(excesses, na.rm = TRUE))"
"0","}"
"0",""
"0","# Compute the mean excess values for each k"
"0","mean_excess_values <- sapply(1:(n-1), function(k) mean_excess(sorted_data, k))"
"0",""
"0","# Prepare points for the plot"
"0","x_points <- sorted_data[1:(n-1)] # X_{k,n}"
"0","y_points <- mean_excess_values   # e_n(X_{k,n})"
"0",""
"0","# Create the Mean Excess Plot"
"0","plot(x_points, y_points, type = ""p"", pch = 16, col = ""blue"","
"0","     xlab = ""Threshold (X_{k,n})"","
"0","     ylab = ""Mean Excess e_n(X_{k,n})"","
"0","     main = ""Mean Excess Plot"" "
"0","    #, xlim = c(0 , 70)"
"0","     )"
